# 节点文档写作规定

为了保证蓝图节点文档的一致性与专业性，所有新编写的节点文档必须遵守以下规定。

## 1. 文件组织
- **存储路径**：文档应存放在 `zhcn-docs/docs/nodes/{category_path}/{id}.md`。
- **分类路径**：`category_path` 应根据 i18n 中的 `node_category.mgmc.*` 层级确定，点号替换为斜杠（例如 `variable/string`）。

## 2. 标题格式
- 使用一级标题：`# 中文名称 (English Name)`。
- 标题下方紧跟一句话的功能描述。

## 3. 节点概览
- **分类**：必须包含完整的中文路径，使用 ` > ` 分隔（例如 `变量 > 字符串`）。
    - **获取方法**：
        1. 在 Java 代码中找到 `.category("node_category.mgmc.xxx.yyy")`。
        2. 将该字符串按点号拆分，逐层在 `zh_cn.json` 中查找翻译。
        3. 例如 `node_category.mgmc.variable.string`：
            - `node_category.mgmc.variable` 翻译为“变量”。
            - `node_category.mgmc.variable.string` 翻译为“字符串”。
            - 最终结果为：`变量 > 字符串`。
- **内部ID**：统一格式为 `mgmc:内部标识符`。
- **预览图**：必须包含 `![alt text](images/image.png)` 占位符（后续统一补充图片）。

## 4. 端口定义表格
- 分为“输入 (Inputs)”和“输出 (Outputs)”两个二级标题。
- 表格列名：`| 端口名称 | 类型 | 说明 |`。
- **端口名称**：**必须读取 `zh_cn.json` i18n 文件中的翻译，严禁私自命名**。格式为：中文名加粗，括号内标注代码中的 Internal Name（例如 `**输入** (Input)`）。
- **类型**：**必须严格遵循 Java 代码中定义的 `PortType`**。格式为：使用中文描述类型，括号内标注代码类型（例如 `字符串 (String)`、`执行流 (Exec)`）。

## 5. 深度溯源要求
对于具有特殊行为的节点，**必须深究具体的代码实现**，严禁仅凭 UI 表现推测逻辑：
- **涉及范围**：包括动态端口（输入/输出）、跨类逻辑调用（如调用了 `GuiNodeHelper`、`BlueprintIO`）、特殊的 GUI 交互或复杂的底层算法。
- **调查类库**：必须查阅 `NodeLogicRegistry`、`TypeConverter` 以及任何节点定义中引用的外部逻辑类。
- **文档体现**：在“行为说明”中必须详细描述这些底层机制（例如：动态端口的排序规则、空值转换的具体默认值、对游戏状态的持久化影响等）。

## 6. 行为说明
- 使用有序列表（1. 2. 3.）。
- 必须包含：
    - 核心逻辑描述。
    - **空值处理**：描述输入为 `null` 或未连接时的表现。
    - **类型转换**：如果涉及 `TypeConverter`，需说明自动转换行为。

## 7. 目录更新
- 编写完文档后，必须在 `zhcn-docs/docs/nodes/目录.md` 中对应分类下添加链接。
- **链接格式**：`- [中文名称](相对路径)`。
    - 相对路径不带 `.md` 后缀。
    - 例如：`- [字符串包含](variable/string/string_contains)`。