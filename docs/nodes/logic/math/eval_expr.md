# 表达式计算 (Evaluate Expression)

将字符串数学表达式解析为浮点数结果。

## 节点概览
- **分类**: 逻辑 > 数学与转换
- **内部ID**：`mgmc:eval_expr`
- ![alt text](images/image-20.png)

## 端口定义

### 输入 (Inputs)
| 端口名称 | 类型 | 说明 |
| :--- | :--- | :--- |
| **表达式** (string) | 字符串 (String) | 待计算的表达式文本。默认值为空字符串。 |

### 输出 (Outputs)
| 端口名称 | 类型 | 说明 |
| :--- | :--- | :--- |
| **输出** (result) | 浮点数 (Float) | 解析后的计算结果。 |

## 行为说明
1. **主要行为**：节点会将输入字符串解析为表达式并计算，支持运算符 `+`、`-`、`*`、`/`、`%`、`^` 与圆括号，空白字符会被忽略，`^` 为右结合。
2. **空值处理**：输入为 `null` 或空字符串时直接返回 `0.0`；表达式不合法（含非法字符、括号不匹配、操作数不足等）时捕获异常并返回 `0.0`。
3. **类型转换**：输入会先通过 `TypeConverter.toString(value, ctx)` 转为字符串并进行变量插值解析；随后在解析阶段将数字文本转换为 `double`，`/` 与 `%` 遇到除数为 `0` 时返回 `0.0`。
